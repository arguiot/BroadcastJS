/* Copyright Arthur Guiot 2019, BroadcastJS */
"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var BroadcastJSNotification=function BroadcastJSNotification(name){var object=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,BroadcastJSNotification);this.name=name;this.object=object};var NotificationCenter=function(){function NotificationCenter(){_classCallCheck(this,NotificationCenter);this.observers=new Map}_createClass(NotificationCenter,[{key:"addObserver",value:function addObserver(name,callback){var reference=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this.observers.set("".concat(name,", ").concat(reference),callback)}},{key:"removeObserver",value:function removeObserver(name){var reference=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.observers["delete"]("".concat(name,", ").concat(reference))}},{key:"post",value:function post(notification){var name=notification.name;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this.observers.keys()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var n=_step.value;if(n.split(",")[0]==name){this.observers.get(n)(notification.object)}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}}},{key:"default",get:function get(){var exportGlobal=function exportGlobal(name,object){if(typeof global!=="undefined"){global[name]=object}else if(typeof window!=="undefined"){window[name]=object}else{throw new Error("Unkown run-time environment. Currently only browsers and Node.js are supported.")}};if(typeof BroadcastJS_Shared_Instance=="undefined"){exportGlobal("BroadcastJS_Shared_Instance",new NotificationCenter)}return BroadcastJS_Shared_Instance}}]);return NotificationCenter}();var exported={Notification:BroadcastJSNotification,NotificationCenter:new NotificationCenter};if(typeof define==="function"&&define.amd){define(function(){return exported})}else if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=exported}exports["default"]=exported}else if(typeof global!=="undefined"){global.BroadcastJS=exported}
